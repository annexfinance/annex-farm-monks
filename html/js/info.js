"use strict";function ownKeys(r,e){var o,n=Object.keys(r);return Object.getOwnPropertySymbols&&(o=Object.getOwnPropertySymbols(r),e&&(o=o.filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})),n.push.apply(n,o)),n}function _objectSpread(r){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?ownKeys(Object(o),!0).forEach(function(e){_defineProperty(r,e,o[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(o)):ownKeys(Object(o)).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(o,e))})}return r}function _defineProperty(e,r,o){return r in e?Object.defineProperty(e,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[r]=o,e}function _slicedToArray(e,r){return _arrayWithHoles(e)||_iterableToArrayLimit(e,r)||_unsupportedIterableToArray(e,r)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _iterableToArrayLimit(e,r){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var o=[],n=!0,t=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(o.push(a.value),!r||o.length!==r);n=!0);}catch(e){t=!0,i=e}finally{try{n||null==s.return||s.return()}finally{if(t)throw i}}return o}}function _arrayWithHoles(e){if(Array.isArray(e))return e}function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,r){if(e){if("string"==typeof e)return _arrayLikeToArray(e,r);var o=Object.prototype.toString.call(e).slice(8,-1);return"Object"===o&&e.constructor&&(o=e.constructor.name),"Map"===o||"Set"===o?Array.from(e):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?_arrayLikeToArray(e,r):void 0}}function _iterableToArray(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _arrayLikeToArray(e,r){(null==r||r>e.length)&&(r=e.length);for(var o=0,n=new Array(r);o<r;o++)n[o]=e[o];return n}var NETWORK=1,NETWORK_BSC=56,SI_SYMBOLS=["","k","M","G","T","P","E"],SWIPE_SWAP_URL="https://api.thegraph.com/subgraphs/name/swipewallet/exchange",SWIPE_SWAP_BSC_URL="https://api.bscgraph.org/subgraphs/id/QmdWgpk8reg9ZfjUQZqpmApANMQWPRLYUX2wweDRjghQGb",MASTERCHEF_URL="https://api.thegraph.com/subgraphs/name/swipewallet/swipeswap",MASTERCHEF_BSC_URL="https://api.bscgraph.org/subgraphs/id/QmddRFPdu65WizL71XRJg7TnoNjKXyb9tQsXGNVUbH24p2",BLOCK_URL="https://api.thegraph.com/subgraphs/name/blocklytics/ethereum-blocks",BSC_BLOCK_URL="https://api.thegraph.com/subgraphs/name/blocklytics/ethereum-blocks",CONTRACT_TOKEN_ADDRESS="0x8CE9137d39326AD0cD6491fb5CC0CbA0e089b6A9",CONTRACT_TOKEN_BSC_ADDRESS="0x47BEAd2563dCBf3bF2c9407fEa4dC236fAbA485A",ETH_PROVIDER="https://mainnet.infura.io/v3/2d70a791e0fd434f865b0a272da5be8f",BSC_PROVIDER="https://bsc-dataseed.binance.org/",index=0;function init(){initData().then(function(e){var r=e.token,o=e.pairs,n=e.bscToken,t=e.bscPairs,i=new BigNumber(0),a=new BigNumber(0),s=new BigNumber(0);o.forEach(function(e){a=new BigNumber(a).plus(e.reserveUSD)}),t.forEach(function(e){s=new BigNumber(s).plus(e.reserveUSD)}),i=a.plus(s);var l=null,c=0,u=0,d=0,b=0;r.quotePairs&&(l=r.quotePairs.find(function(e){return"USDT"==e.token0.symbol&&"SXP"==e.token1.symbol}))&&(c=new BigNumber(l.token1Price).dp(2,1).toNumber(),u=new BigNumber(u).plus(r.untrackedVolumeUSD),d=new BigNumber(r.untrackedVolumeUSD).times(.003),b=new BigNumber(b).plus(l.volumeUSD).toNumber()),!l&&r.basePairs&&(l=r.basePairs.find(function(e){return"USDT"==e.token1.symbol&&"SXP"==e.token0.symbol}))&&(c=new BigNumber(l.token1Price).toNumber(),u=new BigNumber(u).plus(r.untrackedVolumeUSD),d=new BigNumber(r.untrackedVolumeUSD).times(.003),b=new BigNumber(b).plus(l.volumeUSD).toNumber());var m=null;n.quotePairs&&(m=n.quotePairs.find(function(e){return"USDT"==e.token0.symbol&&"SXP"==e.token1.symbol}))&&(u=new BigNumber(u).plus(n.untrackedVolumeUSD),d=new BigNumber(d).plus(.003*n.untrackedVolumeUSD),b=new BigNumber(b).plus(m.volumeUSD).toNumber()),!m&&n.basePairs&&(m=n.basePairs.find(function(e){return"USDT"==e.token1.symbol&&"SXP"==e.token0.symbol}))&&(u=new BigNumber(u).plus(n.untrackedVolumeUSD),d=new BigNumber(d).plus(.003*n.untrackedVolumeUSD),b=new BigNumber(b).plus(m.volumeUSD).toNumber()),updateInfo(c,u.toNumber(),d.toNumber(),i)}).catch(console.log),window.variables.info={filteredPools:[],bscFilteredPools:[]},loadPools().then(function(e){window.variables.info.filteredPools=e,1==NETWORK&&(renderTable(e.slice(0,3)),index=1)}).catch(console.log),loadPoolsBSC().then(function(e){window.variables.info.bscFilteredPools=e,56==NETWORK&&(renderTable(e.slice(0,3)),index=1)}).catch(console.log)}function initData(){var e=window.variables.TOKEN_LIST[NETWORK],r=window.variables.TOKEN_LIST[NETWORK_BSC],o=e.find(function(e){return"SXP"==e.symbol}),n=r.find(function(e){return"SXP"==e.symbol});return Promise.all([getToken(o.address,SWIPE_SWAP_URL),getFullPairs(0,1e3,SWIPE_SWAP_URL),getToken(n.address,SWIPE_SWAP_BSC_URL),getFullPairs(0,1e3,SWIPE_SWAP_BSC_URL)]).then(function(e){var r=_slicedToArray(e,4);return{token:r[0],pairs:r[1],bscToken:r[2],bscPairs:r[3]}}).catch(console.log)}function updateInfo(e,r,o,n){$("#sxp_price span").text("$".concat(abbreviateNumberSI(e,0,2))),$("#sxp_volume span").text("$".concat(abbreviateNumberSI(r,0,2))),$("#sxp_fee span").text("$".concat(abbreviateNumberSI(o,0,2))),$("#sxp_volume24 span").text("$".concat(abbreviateNumberSI(n,0,2)))}function loadPools(){return Promise.all([getPools(MASTERCHEF_URL),getAverageBlockTime(BLOCK_URL),getToken(CONTRACT_TOKEN_ADDRESS,SWIPE_SWAP_URL),getEthPrice(SWIPE_SWAP_URL)]).then(function(e){var r=_slicedToArray(e,4),n=r[0],m=r[1],o=r[2],t=r[3],f=(0!==t.length?t[0].ethPrice:0)*o.derivedETH,i=n.map(function(e){return e.pair}).sort();return Promise.all([getPairs(i,SWIPE_SWAP_URL),getFarmSLPBalanceForInfo(n,window.values[1].CONTRACT_MASTERCHEF_ADDRESS,ETH_PROVIDER)]).then(function(e){var r=_slicedToArray(e,2),d=r[0],o=r[1],b=o.balances;o.pairTokenContracts;return n.filter(function(r){return!window.variables.POOL_DENY.includes(r.id)&&"0"!==r.allocPoint&&d.find(function(e){return(null==e?void 0:e.id)===r.pair})}).map(function(r){var e=d.find(function(e){return e.id===r.pair}),o=b[r.pair].balance.toString(10),n=3600/m,t=o/Number(e.totalSupply)*Number(e.reserveUSD),i=r.allocPoint/r.owner.totalAllocPoint*r.owner.swipePerBlock/1e18,a=t?2*i*f/t:0,s=a*n,l=24*s,c=30*l,u=12*c;return _objectSpread(_objectSpread({},r),{},{liquidityPair:e,roiPerBlock:a,roiPerHour:s,roiPerDay:l,roiPerMonth:c,roiPerYear:u,rewardPerThousand:1e3/f*l})}).sort(function(e,r){return Number(r.roiPerYear)-Number(e.roiPerYear)})}).catch(console.log)})}function loadPoolsBSC(){return Promise.all([getPoolsFromBSC(),getToken(CONTRACT_TOKEN_BSC_ADDRESS,SWIPE_SWAP_BSC_URL),getEthPrice(SWIPE_SWAP_BSC_URL)]).then(function(e){var r=_slicedToArray(e,3),o=r[0],n=r[1],t=r[2],d=(0!==t.length?t[0].ethPrice:0)*n.derivedETH,i=o.map(function(e){return e.pair}).sort();return Promise.all([getPairs(i,SWIPE_SWAP_BSC_URL),getFarmSLPBalanceForInfo(o,window.values[56].CONTRACT_MASTERCHEF_ADDRESS,BSC_PROVIDER)]).then(function(e){var r=_slicedToArray(e,2),c=r[0],u=r[1].balances;return o.filter(function(r){return!window.variables.POOL_DENY.includes(r.id)&&"0"!==r.allocPoint&&c.find(function(e){return(null==e?void 0:e.id)===r.pair})}).map(function(r){var e=c.find(function(e){return e.id===r.pair}),o=u[r.pair].balance.toString(10)/Number(e.totalSupply)*Number(e.reserveUSD),n=r.allocPoint/r.owner.totalAllocPoint*r.owner.swipePerBlock/1e18,t=o?2*n*d/o:0,i=900*t,a=24*i,s=30*a,l=12*s;return _objectSpread(_objectSpread({},r),{},{liquidityPair:e,roiPerBlock:t,roiPerHour:i,roiPerDay:a,roiPerMonth:s,roiPerYear:l,rewardPerThousand:1e3/d*a})}).sort(function(e,r){return Number(r.roiPerYear)-Number(e.roiPerYear)})}).catch(console.log)})}function renderTable(e){var s=window.variables.TOKEN_LIST[NETWORK];0<e.length&&e.forEach(function(r){var e,o,n="".concat(r.liquidityPair.token0.name," - ").concat(r.liquidityPair.token1.name),t="".concat(r.liquidityPair.token0.symbol," / ").concat(r.liquidityPair.token1.symbol),i=(s.find(function(e){return e.address.toLowerCase()==r.liquidityPair.token0.id}),s.find(function(e){return e.address.toLowerCase()==r.liquidityPair.token1.id}),(null===(e=s.find(function(e){return toChecksumAddress(e.address)===toChecksumAddress(r.liquidityPair.token0.id)}))||void 0===e?void 0:e.logoURI)||"images/defaultAsset.svg"),a=(null===(o=s.find(function(e){return toChecksumAddress(e.address)===toChecksumAddress(r.liquidityPair.token1.id)}))||void 0===o?void 0:o.logoURI)||"images/defaultAsset.svg";$("#pools-table").append('\n        <div class="pool"> \n          <div class="pool-icon"> \n            <div class="first-icon"><img src="'.concat(i,'" alt="').concat(r.liquidityPair.token0.symbol,'"></div>\n            <div class="second-icon"><img src="').concat(a,'" alt="').concat(r.liquidityPair.token1.symbol,'"></div>\n          </div>\n          <div class="pool-name">\n            <div class="pool-name--symbol">').concat(t,'</div>\n            <div class="pool-name--fullname">').concat(n,'</div>\n          </div>\n          <div class="pool-liquidity"> \n            <div class="pool-liquidity--usd">').concat(formatNumber(r.liquidityPair.reserveUSD,2,"en","currency","USD"),'</div>\n            <div class="pool-liquidity--descr">Available liquidity</div>\n          </div>\n          <div class="pool-apy"> \n            <div class="pool-apy--value">').concat(formatNumber(100*r.roiPerYear,2),'%</div>\n            <div class="pool-apy--descr">APY</div>\n          </div>\n        </div>\n      '))})}window.onload=function(){window.variables.info={},window.events.init=init,window.triggers.onLoad=[].concat(_toConsumableArray(window.triggers.onLoad||[]),["init"]),$(document).on("click",".chain-selector .selector",function(e){e.preventDefault(),$("#pools-table").empty(),$(".view-more").show(),index=0,$(this).hasClass("eth-chooser")?(NETWORK=56,renderTable(window.variables.info.bscFilteredPools.slice(0,3)),$(".chain-selector .chain-name.eth").removeClass("selected"),$(".chain-selector .chain-name.bsc").addClass("selected"),$(this).removeClass("eth-chooser"),$(this).addClass("bsc-chooser"),$(this).find("img")[0].src="images/bnb.svg"):(NETWORK=1,renderTable(window.variables.info.filteredPools.slice(0,3)),$(".chain-selector .chain-name.eth").addClass("selected"),$(".chain-selector .chain-name.bsc").removeClass("selected"),$(this).removeClass("bsc-chooser"),$(this).addClass("eth-chooser"),$(this).find("img")[0].src="images/eth3.svg"),index=1}),$(document).on("click",".view-more",function(e){e.preventDefault();var r,o,n=[];1==NETWORK?(r=3*(index+1)>window.variables.info.filteredPools.length?window.variables.info.filteredPools.length:3*(index+1),n=window.variables.info.filteredPools.slice(3*index,r),r==window.variables.info.filteredPools.length&&$(".view-more").hide()):(o=3*(index+1)>window.variables.info.bscFilteredPools.length?window.variables.info.bscFilteredPools.length:3*(index+1),n=window.variables.info.bscFilteredPools.slice(3*index,o),o==window.variables.info.bscFilteredPools.length&&$(".view-more").hide()),renderTable(n),index++})};var abbreviateNumberFactory=function(i){return function(e,r,o){if(0===e)return e;var n=Math.floor(Math.log10(Math.abs(e))/3),t=void 0===i[n]?"~":i[n];return(e/Math.pow(10,3*n)).toLocaleString(void 0,{minimumFractionDigits:r,maximumFractionDigits:o})+t}},abbreviateNumberSI=abbreviateNumberFactory(SI_SYMBOLS);function getFarmSLPBalanceForInfo(e,r,o){web3.setProvider(o);var n=Object.fromEntries(e.map(function(e){return[e.pair,getPairTokenContract(e.pair)]}));return Promise.all(Object.keys(n).map(function(e){return Promise.all([Promise.resolve(e),web3?call(n[e].methods.balanceOf)(r):Promise.resolve("0")])})).then(function(e){return{balances:e.reduce(function(e,r){var o=_slicedToArray(r,2),n=o[0],t=o[1];return _objectSpread(_objectSpread({},e),{},_defineProperty({},n,{balance:fromWei(new BigNumber(t),18)}))},{}),pairTokenContracts:n}}).catch(console.log)}